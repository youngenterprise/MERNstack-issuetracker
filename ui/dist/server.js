!function(e){var t={};function s(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=e,s.c=t,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)s.d(n,a,function(t){return e[t]}.bind(null,a));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/",s(s.s=13)}([function(e,t){e.exports=require("react")},function(e,t){e.exports=require("react-bootstrap")},function(e,t){e.exports=require("react-router-dom")},function(e,t){e.exports=require("react-router-bootstrap")},function(e,t){e.exports=require("url-search-params")},function(e,t){e.exports=require("path")},function(e,t){e.exports=require("express")},function(e,t){e.exports=require("webpack")},function(e,t){e.exports=require("dotenv")},function(e,t){e.exports=require("http-proxy-middleware")},function(e,t){e.exports=require("source-map-support")},function(e,t){e.exports=require("react-dom/server")},function(e,t){e.exports=require("isomorphic-fetch")},function(e,t,s){e.exports=s(18)},function(e,t){e.exports=require("webpack-dev-middleware")},function(e,t){e.exports=require("webpack-hot-middleware")},function(e,t,s){(function(t){const n=s(5),a=s(17),o=s(7),i={mode:"development",entry:{app:["./browser/App.jsx"]},output:{filename:"[name].bundle.js",path:n.resolve(t,"public"),publicPath:"/"},module:{rules:[{test:/\.jsx?$/,exclude:/node_modules/,use:{loader:"babel-loader",options:{presets:[["@babel/preset-env",{targets:{ie:"11",edge:"15",safari:"10",firefox:"50",chrome:"49"}}],"@babel/preset-react"]}}}]},optimization:{splitChunks:{name:"vendor",chunks:"all"}},plugins:[new o.DefinePlugin({__isBrowser__:"true"})],devtool:"source-map"},r={mode:"development",entry:{server:["./server/uiserver.js"]},target:"node",externals:[a()],output:{filename:"server.js",path:n.resolve(t,"dist"),publicPath:"/"},module:{rules:[{test:/\.jsx?$/,use:{loader:"babel-loader",options:{presets:[["@babel/preset-env",{targets:{node:"10"}}],"@babel/preset-react"]}}}]},plugins:[new o.DefinePlugin({__isBrowser__:"false"})],devtool:"source-map"};e.exports=[i,r]}).call(this,"/")},function(e,t){e.exports=require("webpack-node-externals")},function(e,t,s){"use strict";s.r(t);var n=s(8),a=s.n(n),o=s(5),i=s.n(o),r=s(6),l=s.n(r),c=s(9),u=s.n(c),h=s(10),d=s.n(h),m=s(0),p=s.n(m),E=s(11),g=s.n(E),f=s(2),b=s(1),v=s(3);var C={},y=s(12),w=s.n(y);const S=new RegExp("^\\d\\d\\d\\d-\\d\\d-\\d\\d");function x(e,t){return S.test(t)?new Date(t):t}async function I(e,t={},s=null){const n=process.env.UI_SERVER_API_ENDPOINT;try{const a=await w()(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:e,variables:t})}),o=await a.text(),i=JSON.parse(o,x);if(i.errors){const e=i.errors[0];if("BAD_USER_INPUT"===e.extensions.code){const t=e.extensions.exception.errors.join("\n ");s&&s(`${e.message}:\n ${t}`)}else s&&s(`${e.extensions.code}: ${e.message}`)}return i.data}catch(e){return s&&s("Error in sending data to server: "+e.message),null}}class T extends p.a.Component{static async fetchData(){return await I("query {about}")}constructor(e){super(e);const t=C.initialData?C.initialData.about:null;this.state={apiAbout:t}}async componentDidMount(){const{apiAbout:e}=this.state;if(null==e){const e=await T.fetchData();this.setState({apiAbout:e.about})}}render(){const{apiAbout:e}=this.state;return p.a.createElement("div",{className:"text-center"},p.a.createElement("h3",null,"Issue Tracker version 0.9"),p.a.createElement("h4",null,e))}}var D=s(4),M=s.n(D);class F extends p.a.Component{constructor({location:{search:e}}){super();const t=new M.a(e);this.state={status:t.get("status")||"",effortMin:t.get("effortMin")||"",effortMax:t.get("effortMax")||"",changed:!1},this.onChangeStatus=this.onChangeStatus.bind(this),this.onChangeEffortMin=this.onChangeEffortMin.bind(this),this.onChangeEffortMax=this.onChangeEffortMax.bind(this),this.applyFilter=this.applyFilter.bind(this),this.showOriginalFilter=this.showOriginalFilter.bind(this)}componentDidUpdate(e){const{location:{search:t}}=e,{location:{search:s}}=this.props;t!==s&&this.showOriginalFilter()}onChangeStatus(e){this.setState({status:e.target.value,changed:!0})}onChangeEffortMin(e){e.target.value.match(/^\d*$/)&&this.setState({effortMin:e.target.value,changed:!0})}onChangeEffortMax(e){e.target.value.match(/^\d*$/)&&this.setState({effortMax:e.target.value,changed:!0})}showOriginalFilter(){const{location:{search:e}}=this.props,t=new M.a(e);this.setState({status:t.get("status")||"",changed:!1})}applyFilter(){const{status:e,effortMin:t,effortMax:s}=this.state,{history:n}=this.props,a=new M.a;e&&a.set("status",e),t&&a.set("effortMin",t),s&&a.set("effortMax",s);const o=a.toString()?"?"+a.toString():"";n.push({pathname:"/issues",search:o})}render(){const{status:e,changed:t}=this.state,{effortMin:s,effortMax:n}=this.state;return p.a.createElement(b.Row,null,p.a.createElement(b.Col,{xs:6,sm:4,md:3,lg:2},p.a.createElement(b.FormGroup,null,p.a.createElement(b.ControlLabel,null,"Status:"),p.a.createElement(b.FormControl,{componentClass:"select",value:e,onChange:this.onChangeStatus},p.a.createElement("option",{value:""},"(All)"),p.a.createElement("option",{value:"New"},"New"),p.a.createElement("option",{value:"Fixed"},"Fixed"),p.a.createElement("option",{value:"Closed"},"Closed")))),p.a.createElement(b.Col,{xs:6,sm:4,md:3,lg:2},p.a.createElement(b.FormGroup,null,p.a.createElement(b.ControlLabel,null,"Effort between:"),p.a.createElement(b.InputGroup,null,p.a.createElement(b.FormControl,{value:s,onChange:this.onChangeEffortMin}),p.a.createElement(b.InputGroup.Addon,null,"-"),p.a.createElement(b.FormControl,{value:n,onChange:this.onChangeEffortMax})))),p.a.createElement(b.Col,{xs:6,sm:4,md:3,lg:2},p.a.createElement(b.FormGroup,null,p.a.createElement(b.ControlLabel,null,"Â "),p.a.createElement(b.ButtonToolbar,null,p.a.createElement(b.Button,{bsStyle:"primary",type:"button",onClick:this.applyFilter},"Apply"),p.a.createElement(b.Button,{type:"button",onClick:this.showOriginalFilter,disabled:!t},"Reset")))))}}var N=Object(f.withRouter)(F);const O=Object(f.withRouter)(({issue:e,location:{search:t},closeIssue:s,deleteIssue:n,index:a})=>{const o={pathname:"/issues/"+e.id,search:t},i=p.a.createElement(b.Tooltip,{id:"close-tooltip",placement:"top"},"Edit Issue"),r=p.a.createElement(b.Tooltip,{id:"close-tooltop",placement:"top"},"Close Issue"),l=p.a.createElement(b.Tooltip,{id:"delete-tooltip",placement:"top"},"Delete Issue");const c=p.a.createElement("tr",null,p.a.createElement("td",null,e.id),p.a.createElement("td",null,e.status),p.a.createElement("td",null,e.owner),p.a.createElement("td",null,e.created.toDateString()),p.a.createElement("td",null,e.effort),p.a.createElement("td",null,e.due?e.due.toDateString():""),p.a.createElement("td",null,e.title),p.a.createElement("td",null,p.a.createElement(v.LinkContainer,{to:"/edit/"+e.id},p.a.createElement(b.OverlayTrigger,{delayShow:1e3,overlay:i},p.a.createElement(b.Button,{bsSize:"xsmall"},p.a.createElement(b.Glyphicon,{glyph:"edit"}))))," ",p.a.createElement(b.OverlayTrigger,{delayShow:1e3,overlay:r},p.a.createElement(b.Button,{bsSize:"xsmall",onClick:function(e){e.preventDefault(),s(a)}},p.a.createElement(b.Glyphicon,{glyph:"remove"})))," ",p.a.createElement(b.OverlayTrigger,{delayShow:1e3,overlay:l},p.a.createElement(b.Button,{bsSize:"xsmall",onClick:function(e){e.preventDefault(),n(a)}},p.a.createElement(b.Glyphicon,{glyph:"trash"})))));return p.a.createElement(v.LinkContainer,{to:o},c)});function P({issues:e,closeIssue:t,deleteIssue:s}){const n=e.map((e,n)=>p.a.createElement(O,{key:e.id,issue:e,closeIssue:t,deleteIssue:s,index:n}));return p.a.createElement(b.Table,{bordered:!0,condensed:!0,hover:!0,responsive:!0},p.a.createElement("thead",null,p.a.createElement("tr",null,p.a.createElement("th",null,"ID"),p.a.createElement("th",null,"Status"),p.a.createElement("th",null,"Owner"),p.a.createElement("th",null,"Created"),p.a.createElement("th",null,"Effort"),p.a.createElement("th",null,"Due Date"),p.a.createElement("th",null,"Title"),p.a.createElement("th",null,"Action"))),p.a.createElement("tbody",null,n))}class _ extends p.a.Component{componentDidUpdate(){const{showing:e,onDismiss:t}=this.props;e&&(clearTimeout(this.dismissTimer),this.dismissTimer=setTimeout(t,5e3))}componentWillUnmount(){clearTimeout(this.dismissTimer)}render(){const{showing:e,bsStyle:t,onDismiss:s,children:n}=this.props;return p.a.createElement(b.Collapse,{in:e},p.a.createElement("div",{style:{position:"fixed",bottom:20,left:20}},p.a.createElement(b.Alert,{bsStyle:t,onDismiss:s},n)))}}class k extends p.a.Component{constructor(){super(),this.state={issue:{},toastVisible:!1,toastMessage:"",toastType:"info"},this.showError=this.showError.bind(this),this.dismissToast=this.dismissToast.bind(this)}componentDidMount(){this.loadData()}componentDidUpdate(e){const{match:{params:{id:t}}}=e,{match:{params:{id:s}}}=this.props;t!==s&&this.loadData()}showError(e){this.setState({toastVisible:!0,toastMessage:e,toastType:"danger"})}dismissToast(){this.setState({toastVisible:!1})}async loadData(){const{match:{params:{id:e}}}=this.props,t=await I("query issue($id: Int!) {\n      issue (id: $id) {\n        id description\n      }\n    }",{id:e},this.showError);t?this.setState({issue:t.issue}):this.setState({issue:{}})}render(){const{issue:{description:e}}=this.state,{toastVisible:t,toastType:s,toastMessage:n}=this.state;return p.a.createElement("div",null,p.a.createElement("h3",null,"Description"),p.a.createElement("pre",null,e),p.a.createElement(_,{showing:t,onDismiss:this.dismissToast,bsStyle:s},n))}}class V extends p.a.Component{constructor(){super(),this.state={issues:[],toastVisible:!1,toastMessage:"",toastType:"info"},this.closeIssue=this.closeIssue.bind(this),this.deleteIssue=this.deleteIssue.bind(this),this.showSuccess=this.showSuccess.bind(this),this.showError=this.showError.bind(this),this.dismissToast=this.dismissToast.bind(this)}componentDidMount(){this.loadData()}componentDidUpdate(e){const{location:{search:t}}=e,{location:{search:s}}=this.props;t!==s&&this.loadData()}async loadData(){const{location:{search:e}}=this.props,t=new M.a(e),s={};t.get("status")&&(s.status=t.get("status"));const n=parseInt(t.get("effortMin"),10);Number.isNaN(n)||(s.effortMin=n);const a=parseInt(t.get("effortMax"),10);Number.isNaN(a)||(s.effortMax=a);const o=await I("query issueList(\n      $status: StatusType\n      $effortMin: Int\n      $effortMax: Int\n    ) {\n      issueList(\n        status: $status\n        effortMin: $effortMin\n        effortMax: $effortMax\n      ) {\n        id title status owner\n        created effort due\n      }\n    }",s,this.showError);o&&this.setState({issues:o.issueList})}async closeIssue(e){const{issues:t}=this.state,s=await I("mutation issueClose($id: Int!) {\n      issueUpdate(id: $id, changes: { status: Closed }) {\n        id title status owner\n        effort created due description\n      }\n    }",{id:t[e].id},this.showError);s?this.setState(t=>{const n=[...t.issues];return n[e]=s.issueUpdate,{issues:n}}):this.loadData()}async deleteIssue(e){const{issues:t}=this.state,{location:{pathname:s,search:n},history:a}=this.props,{id:o}=t[e],i=await I("mutation issueDelete($id: Int!) {\n      issueDelete(id: $id)\n    }",{id:o},this.showError);i&&i.issueDelete?(this.setState(t=>{const i=[...t.issues];return s==="/issues/"+o&&a.push({pathname:"/issues",search:n}),i.splice(e,1),{issues:i}}),this.showSuccess(`Deleted issue ${o} successfully.`)):this.loadData()}showSuccess(e){this.setState({toastVisible:!0,toastMessage:e,toastType:"success"})}showError(e){this.setState({toastVisible:!0,toastMessage:e,toastType:"danger"})}dismissToast(){this.setState({toastVisible:!1})}render(){const{issues:e}=this.state,{toastVisible:t,toastType:s,toastMessage:n}=this.state,{match:a}=this.props;return p.a.createElement(p.a.Fragment,null,p.a.createElement(b.Panel,null,p.a.createElement(b.Panel.Heading,null,p.a.createElement(b.Panel.Title,{toggle:!0},"Filter")),p.a.createElement(b.Panel.Body,{collapsible:!0},p.a.createElement(N,null))),p.a.createElement(P,{issues:e,closeIssue:this.closeIssue,deleteIssue:this.deleteIssue}),p.a.createElement(f.Route,{path:a.path+"/:id",component:k}),p.a.createElement(_,{showing:t,onDismiss:this.dismissToast,bsStyle:s},n))}}function B(){return p.a.createElement("div",null,p.a.createElement("h2",null,"This is a placeholder fro the Issue Report"))}function $(){return($=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}class A extends p.a.Component{constructor(e){var t;super(e),this.state={value:(t=e.value,null!=t?t.toString():"")},this.onBlur=this.onBlur.bind(this),this.onChange=this.onChange.bind(this)}onChange(e){e.target.value.match(/^\d*$/)&&this.setState({value:e.target.value})}onBlur(e){const{onChange:t}=this.props,{value:s}=this.state;t(e,function(e){const t=parseInt(e,10);return Number.isNaN(t)?null:t}(s))}render(){const{value:e}=this.state;return p.a.createElement("input",$({type:"text"},this.props,{value:e,onBlur:this.onBlur,onChange:this.onChange}))}}function R(){return(R=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}class j extends p.a.Component{constructor(e){var t;super(e),this.state={value:(t=e.value,null!=t?t.toISOString().substr(0,10):""),focused:!1,valid:!0},this.onFocus=this.onFocus.bind(this),this.onBlur=this.onBlur.bind(this),this.onChange=this.onChange.bind(this)}onFocus(){this.setState({focused:!0})}onBlur(e){const{value:t,valid:s}=this.state,{onValidityChange:n,onChange:a}=this.props,o=function(e){const t=new Date(e);return Number.isNaN(t.getTime())?null:t}(t),i=""===t||null!=o;i!==s&&n&&n(e,i),this.setState({focused:!1,valid:i}),i&&a(e,o)}onChange(e){e.target.value.match(/^[\d-]*$/)&&this.setState({value:e.target.value})}render(){const{valid:e,focused:t,value:s}=this.state,{value:n,onValidityChange:a,...o}=this.props,i=t||!e?s:null!=(r=n)?r.toDateString():"";var r;return p.a.createElement("input",R({},o,{value:i,placeholder:t?"yyyy-mm-dd":null,onFocus:this.onFocus,onBlur:this.onBlur,onChange:this.onChange}))}}class L extends p.a.Component{constructor(e){var t;super(e),this.state={value:(t=e.value,null!=t?t:"")},this.onBlur=this.onBlur.bind(this),this.onChange=this.onChange.bind(this)}onChange(e){this.setState({value:e.target.value})}onBlur(e){const{onChange:t}=this.props,{value:s}=this.state;var n;t(e,0===(n=s).trim().length?null:n)}render(){const{value:e}=this.state,{tag:t="input",...s}=this.props;return p.a.createElement(t,{...s,value:e,onBlur:this.onBlur,onChange:this.onChange})}}class U extends p.a.Component{constructor(){super(),this.state={issue:{},invalidFields:{},showingValidation:!1,toastVisible:!1,toastMessage:"",toastType:"success"},this.onChange=this.onChange.bind(this),this.handleSubmit=this.handleSubmit.bind(this),this.onValidityChange=this.onValidityChange.bind(this),this.showSuccess=this.showSuccess.bind(this),this.showError=this.showError.bind(this),this.dismissToast=this.dismissToast.bind(this)}componentDidMount(){this.loadData()}componentDidUpdate(e){const{match:{params:{id:t}}}=e,{match:{params:{id:s}}}=this.props;s!==t&&this.loadData()}onChange(e,t){const{name:s,value:n}=e.target,a=void 0===t?n:t;this.setState(e=>({issue:{...e.issue,[s]:a}}))}onValidityChange(e,t){const{name:s}=e.target;this.setState(e=>{const n={...e.invalidFields,[s]:!t};return t&&delete n[s],{invalidFields:n}})}async handleSubmit(e){e.preventDefault(),this.showValidation();const{issue:t,invalidFields:s}=this.state;if(0!==Object.keys(s).length)return;const{id:n,created:a,...o}=t,i=await I("mutation issueUpdate(\n        $id: Int!\n        $changes: IssueUpdateInputs!\n    ){\n        issueUpdate(\n            id: $id\n            changes: $changes\n        ){\n            id title status owner\n            effort created due description\n        }\n    }",{changes:o,id:n},this.showError);i&&(this.setState({issue:i.issueUpdate}),this.showSuccess("Updated issue successfully"))}async loadData(){const{match:{params:{id:e}}}=this.props,t=await I("query issue($id: Int!) {\n          issue(id: $id) {\n              id title status owner\n              effort created due description\n          }\n      }",{id:e},this.showError);this.setState({issue:t?t.issue:{},invalidFields:{}})}showValidation(){this.setState({showingValidation:!0})}dismissValidation(){this.setState({showingValidation:!1})}showSuccess(e){this.setState({toastVisible:!0,toastMessage:e,toastType:"success"})}showError(e){this.setState({toastVisible:!0,toastMessage:e,toastType:"danger"})}dismissToast(){this.setState({toastVisible:!1})}render(){const{issue:{id:e}}=this.state,{match:{params:{id:t}}}=this.props,{toastVisible:s,toastMessage:n,toastType:a}=this.state;if(null==e)return null!=t?p.a.createElement("h3",null,`Issue with ID ${t} not found.`):null;const{invalidFields:o,showingValidation:i}=this.state;let r;0!==Object.keys(o).length&&i&&(r=p.a.createElement(b.Alert,{bsStyle:"danger",onDismiss:this.dismissValidation},"Please correct invalid fields before submitting."));const{issue:{title:l,status:c}}=this.state,{issue:{owner:u,effort:h,description:d}}=this.state,{issue:{created:m,due:E}}=this.state;return p.a.createElement(b.Panel,null,p.a.createElement(b.Panel.Heading,null,p.a.createElement(b.Panel.Title,null,"Editing issue: "+e)),p.a.createElement(b.Panel.Body,null,p.a.createElement(b.Form,{horizontal:!0,onSubmit:this.handleSubmit},p.a.createElement(b.FormGroup,null,p.a.createElement(b.Col,{componentClass:b.ControlLabel,sm:3},"Created"),p.a.createElement(b.Col,{sm:9},p.a.createElement(b.FormControl.Static,null,m.toDateString()))),p.a.createElement(b.FormGroup,null,p.a.createElement(b.Col,{componentClass:b.ControlLabel,sm:3},"Status"),p.a.createElement(b.Col,{sm:9},p.a.createElement(b.FormControl,{componentClass:"select",name:"status",value:c,onChange:this.onChange},p.a.createElement("option",{value:"New"},"New"),p.a.createElement("option",{value:"Assigned"},"Assigned"),p.a.createElement("option",{value:"Fixed"},"Fixed"),p.a.createElement("option",{value:"Closed"},"Closed")))),p.a.createElement(b.FormGroup,null,p.a.createElement(b.Col,{componentClass:b.ControlLabel,sm:3},"Owner"),p.a.createElement(b.Col,{sm:9},p.a.createElement(b.FormControl,{componentClass:L,name:"owner",value:u,onChange:this.onChange,key:e}))),p.a.createElement(b.FormGroup,null,p.a.createElement(b.Col,{componentClass:b.ControlLabel,sm:3},"Effort"),p.a.createElement(b.Col,{sm:9},p.a.createElement(b.FormControl,{componentClass:A,name:"effort",value:h,onChange:this.onChange,key:e}))),p.a.createElement(b.FormGroup,{validationState:o.due?"error":null},p.a.createElement(b.Col,{componentClass:b.ControlLabel,sm:3},"Due"),p.a.createElement(b.Col,{sm:9},p.a.createElement(b.FormControl,{componentClass:j,onValidityChange:this.onValidityChange,name:"due",value:E,onChange:this.onChange,key:e}),p.a.createElement(b.FormControl.Feedback,null))),p.a.createElement(b.FormGroup,null,p.a.createElement(b.Col,{componentClass:b.ControlLabel,sm:3},"Title"),p.a.createElement(b.Col,{sm:9},p.a.createElement(b.FormControl,{componentClass:L,size:50,name:"title",value:l,onChange:this.onChange,key:e}))),p.a.createElement(b.FormGroup,null,p.a.createElement(b.Col,{componentClass:b.ControlLabel,sm:3},"Description"),p.a.createElement(b.Col,{sm:9},p.a.createElement(b.FormControl,{componentClass:L,tag:"textarea",rows:4,cols:50,name:"description",value:d,onChange:this.onChange,key:e}))),p.a.createElement(b.FormGroup,null,p.a.createElement(b.Col,{smOffset:3,sm:6},p.a.createElement(b.ButtonToolbar,null,p.a.createElement(b.Button,{bsStyle:"primary",type:"submit"},"Submit"),p.a.createElement(v.LinkContainer,{to:"/issues"},p.a.createElement(b.Button,{bsStyle:"link"},"Back"))))),p.a.createElement(b.FormGroup,null,p.a.createElement(b.Col,{smOffset:3,sm:9},r)))),p.a.createElement(b.Panel.Footer,null,p.a.createElement(f.Link,{to:`/edit/${e}-1`},"Prev")," | ",p.a.createElement(f.Link,{to:`/edit/${e}+1`},"Next")),p.a.createElement(_,{showing:s,onDismiss:this.dismissToast,bsStyle:a},n))}}const G=()=>p.a.createElement("h1",null,"Page Not Found");function q(){return p.a.createElement(f.Switch,null,p.a.createElement(f.Redirect,{exact:!0,from:"/",to:"/issues"}),p.a.createElement(f.Route,{path:"/issues",component:V}),p.a.createElement(f.Route,{path:"/edit/:id",component:U}),p.a.createElement(f.Route,{path:"/report",component:B}),p.a.createElement(f.Route,{path:"/about",component:T}),p.a.createElement(f.Route,{component:G}))}class H extends p.a.Component{constructor(e){super(e),this.state={showing:!1,toastVisible:!1,toastMessage:"",toastType:"success"},this.showModal=this.showModal.bind(this),this.hideModal=this.hideModal.bind(this),this.handleSubmit=this.handleSubmit.bind(this),this.showError=this.showError.bind(this),this.dismissToast=this.dismissToast.bind(this)}showModal(){this.setState({showing:!0})}hideModal(){this.setState({showing:!1})}showError(e){this.setState({toastVisible:!0,toastMessage:e,toastType:"danger"})}dismissToast(){this.setState({toastVisible:!1})}async handleSubmit(e){e.preventDefault(),this.hideModal();const t=document.forms.issueAdd,s={owner:t.owner.value,title:t.title.value,due:new Date((new Date).getTime()+864e6)},n=await I("mutation issueAdd($issue: IssueInputs!) {\n      issueAdd(issue: $issue) {\n        id\n      }\n    }",{issue:s},this.showError);if(n){const{history:e}=this.props;e.push("/edit/"+n.issueAdd.id)}}render(){const{showing:e}=this.state,{toastVisible:t,toastMessage:s,toastType:n}=this.state;return p.a.createElement(p.a.Fragment,null,p.a.createElement(b.NavItem,{onClick:this.showModal},p.a.createElement(b.OverlayTrigger,{placement:"left",delayShow:1e3,overlay:p.a.createElement(b.Tooltip,{id:"create-issue"},"Create Issue")},p.a.createElement(b.Glyphicon,{glyph:"plus"}))),p.a.createElement(b.Modal,{keyboard:!0,show:e,onHide:this.hideModal},p.a.createElement(b.Modal.Header,{closeButton:!0},p.a.createElement(b.Modal.Title,null,"Create Issue")),p.a.createElement(b.Modal.Body,null,p.a.createElement(b.Form,{name:"issueAdd"},p.a.createElement(b.FormGroup,null,p.a.createElement(b.ControlLabel,null,"Title"),p.a.createElement(b.FormControl,{name:"title",autoFocus:!0})),p.a.createElement(b.FormGroup,null,p.a.createElement(b.ControlLabel,null,"Owner"),p.a.createElement(b.FormControl,{name:"owner"})))),p.a.createElement(b.Modal.Footer,null,p.a.createElement(b.ButtonToolbar,null,p.a.createElement(b.Button,{type:"button",bsStyle:"primary",onClick:this.handleSubmit},"Submit"),p.a.createElement(b.Button,{bsStyle:"link",onClick:this.hideModal},"Cancel")))),p.a.createElement(_,{showing:t,onDismiss:this.dismissToast,bsStyle:n},s))}}var z=Object(f.withRouter)(H);function J(){return p.a.createElement(b.Navbar,{fluid:!0},p.a.createElement(b.Navbar.Header,null,p.a.createElement(b.Navbar.Brand,null,"Issue Tracker")),p.a.createElement(b.Nav,null,p.a.createElement(v.LinkContainer,{exact:!0,to:"/"},p.a.createElement(b.NavItem,null,"Home")),p.a.createElement(v.LinkContainer,{to:"/issues"},p.a.createElement(b.NavItem,null,"Issue List")),p.a.createElement(v.LinkContainer,{to:"/report"},p.a.createElement(b.NavItem,null,"Report"))),p.a.createElement(b.Nav,{pullRight:!0},p.a.createElement(z,null),p.a.createElement(b.NavDropdown,{id:"user-dropdown",title:p.a.createElement(b.Glyphicon,{glyph:"option-vertical"}),noCaret:!0},p.a.createElement(v.LinkContainer,{to:"/about"},p.a.createElement(b.MenuItem,null,"About")))))}function Y(){return p.a.createElement("small",null,p.a.createElement("hr",null),p.a.createElement("p",{className:"text-center"},"Full source code available at this"," ",p.a.createElement("a",{href:"https://github.com/vasansr/pro-mern-stack-2"},"GitHub repository")))}function W(){return p.a.createElement("div",null,p.a.createElement(J,null),p.a.createElement(b.Grid,{fluid:!0},p.a.createElement(q,null)),p.a.createElement(Y,null))}var X=async function(e,t){const s=T.fetchData();C.initialData=s;const n=p.a.createElement(f.StaticRouter,{location:e.url,context:{}},p.a.createElement(W,null)),a=g.a.renderToString(n);t.send(function(e,t){return`<!DOCTYPE HTML>\n  <html>\n  <head>\n    <meta charset="utf-8">\n    <title>Pro MERN Stack</title>\n    <link rel="stylesheet" href="/bootstrap/css/bootstrap.min.css" >\n    <meta name="viewport" content="width=device-width, initial-scale=1.0">\n    <style>\n      table.table-hover tr {cursor: pointer;}\n      .panel-title a {display: block; width: 100%; cursor: pointer;}\n    </style>\n  </head>\n  <body>\n    \x3c!-- Page generated from template. --\x3e\n    <div id="contents">${e}</div>\n    <script>window.__INITIAL_DATA__ = ${JSON.stringify(t)}<\/script>\n    <script src="/env.js"><\/script>\n    <script src="/vendor.bundle.js"><\/script>\n    <script src="/app.bundle.js"><\/script>\n  </body>\n  </html>\n  `}(a,s))};const K=l()();d.a.install(),a.a.config();process.env.ENABLE_HMR;K.use(l.a.static("public"));const Q=process.env.API_PROXY_TARGET;Q&&K.use("/graphql",u()({target:Q})),process.env.UI_API_ENDPOINT||(process.env.UI_API_ENDPOINT="http://localhost:3000/graphql"),process.env.UI_SERVER_API_ENDPOINT||(process.env.UI_SERVER_API_ENDPOINT=process.env.UI_API_ENDPOINT),K.get("/env.js",(e,t)=>{const s={UI_API_ENDPOINT:process.env.UI_API_ENDPOINT};t.send("window.ENV = "+JSON.stringify(s))}),K.get("/about",(e,t,s)=>{X(e,t,s)}),K.get("*",(e,t)=>{t.sendFile(i.a.resolve("public/index.html"))});const Z=process.env.UI_SERVER_PORT||8e3;K.listen(Z,()=>{console.log("UI started on port "+Z)})}]);
//# sourceMappingURL=server.js.map